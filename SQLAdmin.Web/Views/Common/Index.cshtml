@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div ng-controller="gui.common.controller" ontext-menu  data-target="menu">
    <div>
        <sui-menu select="vm.select(menu)" menus="vm.menus"></sui-menu>
        <sa-layout>
            <div ng-controller="database.controller" class="sa-layout-body-explorer" >
                <sui-explorer>
                    <sui-tree tree="vm.database" doubleclick="vm.getTables(tree)" menu-command="vm.contextMenuCommand(command,args)">
                        <sui-contextmenu contextmenu-type='table' class='sui-contextmenu'>
                            <ul>
                                <li click="vm.contextMenuCommand(this)"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>新建查询</div></li>
                                <li click="vm.contextMenuCommand"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>新建数据库</div></li>
                                <li click="vm.contextMenuCommand"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>重命名</div></li>
                                <li click="vm.contextMenuCommand"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>删除</div></li>
                                <li click="vm.contextMenuCommand"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>刷新</div></li>
                                <li click="vm.contextMenuCommand(command)" command="getproperies"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>属性</div></li>
                                <li click="vm.contextMenuCommand(command)" command="getproperies">
                                    <div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>数据统计</div>
                                    <ul class="sui-contextmenu-sub">
                                        <li>CPU</li>
                                        <li>内存</li>
                                        <li>磁盘</li>
                                        <li>数据量</li>
                                        <li>备份</li>
                                        <li>查询</li>
                                        <li>连接</li>
                                    </ul>
                                </li>
                                <li click="vm.contextMenuCommand(command)" command="getproperies"><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>查询优化</div></li>
                            </ul>
                        </sui-contextmenu>
                        <sui-contextmenu contextmenu-type='database' class='sui-contextmenu' click="vm.contextMenuCommand(command)">
                            <ul>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>新建查询</div></li>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>新建数据库</div></li>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>重命名</div></li>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title' command="delete_db">删除</div></li>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>刷新</div></li>
                                <li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>属性</div></li>
                                <li>
                                    <div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>数据统计</div>
                                    <sui-contextmenu contextmenu-type='sub' class='sui-contextmenu sui-contextmenu-sub' click="vm.contextMenuCommand(command)">
                                        <ul>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="getcpuinfo">CPU</div></li>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="getmemoryinfo">内存</div></li>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="getdiskinfo">磁盘</div></li>
                                            @*<li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub'>数据量</div></li>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub'>备份</div></li>*@
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="query_history">查询</div></li>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="getconnectinfo">连接</div></li>
                                            <li><div class='sui-contextmenu-i sui-contextmenu-i-sub'></div><div class='sui-contextmenu-title sui-contextmenu-title-sub' command="geterrorinfo">异常</div></li>
                                        </ul>
                                    </sui-contextmenu>
                                </li>
                                @*<li><div class='sui-contextmenu-i'></div><div class='sui-contextmenu-title'>查询优化</div></li>*@
                                <li><div class="sui-contextmenu-i"></div><div class="sui-contextmenu-title" command="monitor">监视</div></li>
                            </ul>
                        </sui-contextmenu>
                    </sui-tree>
                </sui-explorer>
            </div>
            <div ng-controller="manage.controller" class="sa-layout-body-manage" >
                <sui-tabs pages="vm.pages">
                    @*<div data-view-id="123">@Html.Action("Query", "Manage")</div>*@
                </sui-tabs>
            </div>
        </sa-layout>
        <div>
            <sui-footer>
                <span>&copy;@DateTime.Now.Year SQLAdmin <a href="https://www.giuhub.com/liguifa/sqladmin" target="_blank">GIT 仓库</a></span>
            </sui-footer>
        </div>
    </div>
    <div ng-include src="vm.window"></div>
</div>
<link href="~/Static/ShinyUI/css/sui.icon.css" rel="stylesheet" />
<link href="~/Static/css/layout.css" rel="stylesheet" />
@section Script{
    <script src="~/Static/ShinyUI/script/common/constant.service.js"></script>
    <script src="~/Static/script/services/common.service.js"></script>
    <script src="~/Static/script/services/database.service.js"></script>
    <script src="~/Static/script/controller/gui.common.controller.js"></script>
    <script src="~/Static/script/controller/database.controller.js"></script>
    <script src="~/Static/ShinyUI/script/lib/base64.min.js"></script>
    <script src="~/Static/ShinyUI/script/common/cryptogram.service.js"></script>
    <script src="~/Static/script/controller/about.controller.js"></script>
    <script src="~/Static/script/services/connect.service.js"></script>
    <script src="~/Static/script/controller/connect.controller.js"></script>
    <script src="~/Static/script/services/manage.service.js"></script>
    <script src="~/Static/script/controller/manage.controller.js"></script>
    <script src="~/Static/script/services/query.service.js"></script>
    <script src="~/Static/script/controller/query.controller.js"></script>
    <script src="~/Static/script/services/report.service.js"></script>
    <script src="~/Static/script/controller/report.controller.js"></script>
    <script src="~/Static/script/services/monitor.service.js"></script>
    <script src="~/Static/script/controller/monitor.controller.js"></script>
    <script src="~/Static/script/directive/layout.directive.js"></script>
}